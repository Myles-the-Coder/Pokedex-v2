let pokemonRepository=function(){let e=[];const t=document.querySelector(".pokemon-container"),n=document.querySelectorAll(".loading-icon"),o=document.querySelector("#search-form"),i=document.querySelector("#search-input"),r=document.querySelector("#button-addon2"),a=document.querySelector("#poke-modal"),d=document.querySelector(".modal-body");function s(e){return e.toUpperCase().slice(0,1)+e.slice(1)}function l(e){m(e).then((()=>{const t=document.querySelector(".modal-header"),n=document.querySelector(".modal-title"),o=document.querySelector(".modal-body"),i=document.createElement("img"),r=document.createElement("p"),a=document.createElement("h2"),d=document.createElement("button");i.src=`${e.imageUrl}`,n.innerText=`${s(e.name)}`,d.innerText="X",d.setAttribute("data-bs-dismiss","modal"),function(e,t){const n=[];2===e.types.length?e.types.forEach((o=>{n.push(s(o.type.name)),t.innerText=`\n          Types: ${n} \n          Height: ${e.height}m\n          `})):t.innerText=`\n        Type: ${s(e.types[0].type.name)} \n        Height: ${e.height}m`}(e,r),a.classList.add("pokemon-name"),i.classList.add("pokemon-sprite-lg"),r.classList.add("pokemon-info"),d.classList.add("close-btn"),d.setAttribute("title","Close Modal"),d.setAttribute("aria-label","Close modal"),t.appendChild(d),o.appendChild(i),o.appendChild(r),c(),d.addEventListener("click",(()=>{o.innerHTML=""}))}))}function c(){n.forEach((e=>{e.classList.add("hidden")}))}function u(e){c(),console.error(e)}function m(e){let t=e.detailsUrl;return fetch(t).then((e=>e.json())).then((t=>{e.imageUrl=t.sprites.front_default,e.height=t.height,e.types=t.types})).catch((e=>u(e)))}function p(e){e.preventDefault();let t=document.querySelectorAll(".group-list-item"),n=i.value.toLowerCase();n&&t.forEach((e=>{e.innerText.toLowerCase().indexOf(n)>-1?e.classList.remove("hidden"):e.classList.add("hidden")})),""===n&&t.forEach((e=>e.classList.remove("hidden")))}return o.addEventListener("submit",(e=>p(e))),r.addEventListener("click",(e=>p(e))),i.addEventListener("input",(e=>p(e))),a.addEventListener("hidden.bs.modal",(()=>d.innerHTML="")),{getAll:function(){return e},filterPokemon:function(t){return e.filter((e=>e.name===t))},loadList:function(){return fetch("https://pokeapi.co/api/v2/pokemon/?limit=151").then((e=>e.json())).then((t=>{t.results.forEach((t=>{!function(t){if("object"==typeof t)e.push(t)}({name:t.name,detailsUrl:t.url})}))})).catch((e=>u(e)))},loadDetails:m,addListItem:function(e){let{name:n}=e,o=s(n);const i=document.createElement("li");i.classList.add("group-list-item");const r=document.createElement("button");r.classList.add("btn"),r.innerText=`${o}`,r.setAttribute("data-bs-toggle","modal"),r.setAttribute("data-bs-target","#poke-modal"),i.appendChild(r),t.appendChild(i),c(),r.addEventListener("click",(()=>l(e)))},showDetails:l}}();pokemonRepository.loadList().then((()=>{pokemonRepository.getAll().forEach((e=>{pokemonRepository.addListItem(e)}))}));